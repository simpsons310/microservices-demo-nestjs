# âœ… Setup Checklist - Microservices E-commerce

## ğŸ“‹ Checklist Tá»•ng Há»£p

### BÆ°á»›c 1: Chuáº©n bá»‹ mÃ´i trÆ°á»ng

- [ ] ÄÃ£ cÃ i Ä‘áº·t Node.js 18+
- [ ] ÄÃ£ cÃ i Ä‘áº·t Docker Desktop
- [ ] ÄÃ£ cÃ i Ä‘áº·t Git
- [ ] Docker Ä‘ang cháº¡y (kiá»ƒm tra: `docker --version`)

### BÆ°á»›c 2: Táº¡o cáº¥u trÃºc project

```bash
mkdir microservices-ecommerce
cd microservices-ecommerce
```

- [ ] Táº¡o thÆ° má»¥c `api-gateway`
- [ ] Táº¡o thÆ° má»¥c `user-service`
- [ ] Táº¡o thÆ° má»¥c `product-service`
- [ ] Táº¡o thÆ° má»¥c `order-service`

### BÆ°á»›c 3: Táº¡o docker-compose.yml

- [ ] Copy code tá»« artifact "docker-compose.yml"
- [ ] Save file táº¡i root directory
- [ ] File Ä‘Ãºng format YAML (check indentation)

### BÆ°á»›c 4: Táº¡o .env file

- [ ] Copy code tá»« artifact ".env.example"
- [ ] Save as `.env` táº¡i root directory
- [ ] (Optional) Äá»•i passwords náº¿u muá»‘n

---

## ğŸ”§ Setup tá»«ng Service

### API Gateway (Port 3000)

#### Files cáº§n táº¡o

```bash
api-gateway/
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ nest-cli.json
â””â”€â”€ src/
    â”œâ”€â”€ main.ts
    â”œâ”€â”€ app.module.ts
    â”œâ”€â”€ auth/
    â”‚   â”œâ”€â”€ jwt.guard.ts
    â”‚   â””â”€â”€ auth.module.ts
    â””â”€â”€ proxy/
        â”œâ”€â”€ proxy.controller.ts
        â”œâ”€â”€ proxy.service.ts
        â””â”€â”€ proxy.module.ts
```

#### Checklist

- [ ] Táº¡o `api-gateway/Dockerfile`
- [ ] Táº¡o `api-gateway/package.json`
- [ ] Táº¡o `api-gateway/tsconfig.json`
- [ ] Táº¡o `api-gateway/nest-cli.json`
- [ ] Táº¡o `api-gateway/src/main.ts`
- [ ] Táº¡o `api-gateway/src/app.module.ts`
- [ ] Táº¡o folder `src/auth/` vÃ  cÃ¡c files bÃªn trong
- [ ] Táº¡o folder `src/proxy/` vÃ  cÃ¡c files bÃªn trong

**Nguá»“n code**: Artifact "API Gateway - Complete Code"

---

### User Service (Port 3001)

#### Files cáº§n táº¡o (User Service)

```bash
user-service/
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ nest-cli.json
â””â”€â”€ src/
    â”œâ”€â”€ main.ts
    â”œâ”€â”€ app.module.ts
    â”œâ”€â”€ user/
    â”‚   â”œâ”€â”€ user.entity.ts
    â”‚   â”œâ”€â”€ user.service.ts
    â”‚   â”œâ”€â”€ user.controller.ts
    â”‚   â”œâ”€â”€ user.module.ts
    â”‚   â””â”€â”€ dto/
    â”‚       â””â”€â”€ create-user.dto.ts
    â””â”€â”€ auth/
        â”œâ”€â”€ auth.service.ts
        â”œâ”€â”€ auth.controller.ts
        â”œâ”€â”€ auth.module.ts
        â””â”€â”€ dto/
            â””â”€â”€ login.dto.ts
```

#### Checklist (User Service)

- [ ] Táº¡o `user-service/Dockerfile`
- [ ] Táº¡o `user-service/package.json`
- [ ] Táº¡o `user-service/tsconfig.json`
- [ ] Táº¡o `user-service/nest-cli.json`
- [ ] Táº¡o `user-service/src/main.ts`
- [ ] Táº¡o `user-service/src/app.module.ts`
- [ ] Táº¡o folder `src/user/` vÃ  cÃ¡c files
- [ ] Táº¡o folder `src/user/dto/` vÃ  create-user.dto.ts
- [ ] Táº¡o folder `src/auth/` vÃ  cÃ¡c files
- [ ] Táº¡o folder `src/auth/dto/` vÃ  login.dto.ts

**Nguá»“n code**: Artifact "User Service - Complete Code"

---

### Product Service (Port 3002)

#### Files cáº§n táº¡o (Product Service)

```bash
product-service/
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ nest-cli.json
â””â”€â”€ src/
    â”œâ”€â”€ main.ts
    â”œâ”€â”€ app.module.ts
    â””â”€â”€ product/
        â”œâ”€â”€ product.entity.ts
        â”œâ”€â”€ product.service.ts
        â”œâ”€â”€ product.controller.ts
        â”œâ”€â”€ product.module.ts
        â””â”€â”€ dto/
            â”œâ”€â”€ create-product.dto.ts
            â”œâ”€â”€ update-product.dto.ts
            â””â”€â”€ reduce-stock.dto.ts
```

#### Checklist (Product Service)

- [ ] Táº¡o `product-service/Dockerfile`
- [ ] Táº¡o `product-service/package.json`
- [ ] Táº¡o `product-service/tsconfig.json`
- [ ] Táº¡o `product-service/nest-cli.json`
- [ ] Táº¡o `product-service/src/main.ts`
- [ ] Táº¡o `product-service/src/app.module.ts`
- [ ] Táº¡o folder `src/product/` vÃ  cÃ¡c files
- [ ] Táº¡o folder `src/product/dto/` vÃ  3 DTO files

**Nguá»“n code**: Artifact "Product Service - Complete Code"

---

### Order Service (Port 3003)

#### Files cáº§n táº¡o (Order Service)

```bash
order-service/
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ nest-cli.json
â””â”€â”€ src/
    â”œâ”€â”€ main.ts
    â”œâ”€â”€ app.module.ts
    â”œâ”€â”€ order/
    â”‚   â”œâ”€â”€ order.entity.ts
    â”‚   â”œâ”€â”€ order-item.entity.ts
    â”‚   â”œâ”€â”€ order.service.ts
    â”‚   â”œâ”€â”€ order.controller.ts
    â”‚   â”œâ”€â”€ order.module.ts
    â”‚   â””â”€â”€ dto/
    â”‚       â””â”€â”€ create-order.dto.ts
    â””â”€â”€ clients/
        â””â”€â”€ product.client.ts
```

#### Checklist (Order Service)

- [ ] Táº¡o `order-service/Dockerfile`
- [ ] Táº¡o `order-service/package.json`
- [ ] Táº¡o `order-service/tsconfig.json`
- [ ] Táº¡o `order-service/nest-cli.json`
- [ ] Táº¡o `order-service/src/main.ts`
- [ ] Táº¡o `order-service/src/app.module.ts`
- [ ] Táº¡o folder `src/order/` vÃ  cÃ¡c files
- [ ] Táº¡o folder `src/order/dto/` vÃ  create-order.dto.ts
- [ ] Táº¡o folder `src/clients/` vÃ  product.client.ts

**Nguá»“n code**: Artifact "Order Service - Complete Code"

---

## ğŸš€ Build vÃ  Run

### Checklist cháº¡y project

- [ ] Kiá»ƒm tra táº¥t cáº£ files Ä‘Ã£ táº¡o Ä‘Ãºng
- [ ] Verify docker-compose.yml khÃ´ng cÃ³ lá»—i syntax
- [ ] Run: `docker-compose up --build`
- [ ] Äá»£i táº¥t cáº£ services start (cÃ³ thá»ƒ máº¥t 2-3 phÃºt)

### Kiá»ƒm tra services Ä‘Ã£ cháº¡y

- [ ] API Gateway: `curl http://localhost:3000`
- [ ] User Service: `curl http://localhost:3001`
- [ ] Product Service: `curl http://localhost:3002/products`
- [ ] Order Service: `curl http://localhost:3003`
- [ ] PostgreSQL: Port 5432 available
- [ ] Redis: Port 6379 available

---

## ğŸ§ª Testing

### Test Script

- [ ] Táº¡o file `test-api.sh` tá»« artifact
- [ ] Chmod: `chmod +x test-api.sh`
- [ ] Run: `./test-api.sh`

### Manual Testing

- [ ] Test Ä‘Äƒng kÃ½ user
- [ ] Test login vÃ  láº¥y JWT token
- [ ] Test táº¡o product (vá»›i token)
- [ ] Test get products (khÃ´ng cáº§n token)
- [ ] Test táº¡o order (vá»›i token)
- [ ] Test get orders (vá»›i token)

---

## ğŸ“Š Verify Database

```bash
# Connect to PostgreSQL
docker exec -it ecommerce_postgres psql -U postgres -d ecommerce_db

# Check schemas
\dn

# Check tables in user_schema
SET search_path TO user_schema;
\dt
SELECT * FROM users;

# Check tables in product_schema
SET search_path TO product_schema;
\dt
SELECT * FROM products;

# Check tables in order_schema
SET search_path TO order_schema;
\dt
SELECT * FROM orders;
SELECT * FROM order_items;
```

### Database Checklist

- [ ] Schema `user_schema` tá»“n táº¡i
- [ ] Schema `product_schema` tá»“n táº¡i
- [ ] Schema `order_schema` tá»“n táº¡i
- [ ] Table `users` cÃ³ data sau test
- [ ] Table `products` cÃ³ data sau test
- [ ] Table `orders` cÃ³ data sau test
- [ ] Table `order_items` cÃ³ data sau test

---

## ğŸ› Common Issues & Solutions

### Issue 1: Port already in use

**Error**: `Bind for 0.0.0.0:3000 failed: port is already allocated`

**Solution**:

```bash
# Find process using port
lsof -i :3000
# Kill process
kill -9 <PID>
# Or change port in docker-compose.yml
```

- [ ] Resolved

---

### Issue 2: Database connection failed

**Error**: `Connection error: ECONNREFUSED`

**Solution**:

```bash
# Check PostgreSQL logs
docker-compose logs postgres
# Restart database
docker-compose restart postgres
```

- [ ] Resolved

---

### Issue 3: Services can't connect to each other

**Error**: `ENOTFOUND` hoáº·c `ECONNREFUSED` giá»¯a cÃ¡c services

**Solution**:

- Check service names trong docker-compose.yml
- Verify environment variables (SERVICE_URL)
- Ensure all services are in same network
- [ ] Resolved

---

### Issue 4: TypeORM synchronize not working

**Error**: Tables not created automatically

**Solution**:

- Check database credentials trong .env
- Verify schema name trong environment
- Check logs: `docker-compose logs user-service`
- [ ] Resolved

---

## âœ… Final Verification

### Project structure correct

- [ ] 4 service folders created
- [ ] docker-compose.yml táº¡i root
- [ ] .env file configured
- [ ] All source files created

### Services running

- [ ] All containers running: `docker-compose ps`
- [ ] No error logs: `docker-compose logs`
- [ ] All ports accessible

### APIs working

- [ ] Can register user
- [ ] Can login and get token
- [ ] Can create products
- [ ] Can get products list
- [ ] Can create orders
- [ ] Can get order history

### Database working

- [ ] All schemas created
- [ ] All tables created
- [ ] Data persists after restart

---

## ğŸ“ Learning Checklist

Sau khi hoÃ n thÃ nh project, báº¡n Ä‘Ã£ há»c Ä‘Æ°á»£c:

- [ ] Microservices architecture pattern
- [ ] API Gateway pattern
- [ ] Service-to-service communication (HTTP)
- [ ] JWT authentication flow
- [ ] Database per service pattern
- [ ] NestJS framework basics
- [ ] TypeORM for database
- [ ] Docker containerization
- [ ] Docker Compose orchestration
- [ ] RESTful API design

---

## ğŸ“š Next Steps

Sau khi project cháº¡y thÃ nh cÃ´ng, cÃ³ thá»ƒ má»Ÿ rá»™ng:

- [ ] ThÃªm Swagger documentation
- [ ] Implement Redis caching
- [ ] Add rate limiting
- [ ] Write unit tests
- [ ] Add integration tests
- [ ] Implement logging (Winston)
- [ ] Add monitoring (Prometheus/Grafana)
- [ ] Implement circuit breaker pattern
- [ ] Add message queue (RabbitMQ/Kafka)
- [ ] Deploy to cloud (AWS/GCP/Azure)

---

## ğŸ‰ Completion

Khi táº¥t cáº£ checkboxes Ä‘Ã£ Ä‘Æ°á»£c tick:

- âœ… Project setup hoÃ n táº¥t
- âœ… Services cháº¡y thÃ nh cÃ´ng
- âœ… APIs tested vÃ  working
- âœ… Database verified
- âœ… Ready for development!

- **Congratulations! Báº¡n Ä‘Ã£ hoÃ n thÃ nh Microservices demo project! ğŸŠ**

---

**Need help?**

- Xem láº¡i documentation artifacts
- Check logs: `docker-compose logs -f`
- Verify environment variables
- Check project structure guide
